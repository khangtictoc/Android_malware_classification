import os
import shutil

# Set the paths for the input and output folders

# For example
# input_folder = "/home/virus/Desktop/Benign_2017/"
# output_folders = ["/home/virus/Desktop/folder1/", "/home/virus/Desktop/folder2/", "/home/virus/Desktop/folder3/"]

print("Usage: This program is used for splitting large-size folder into smaller ones for running Feature Extraction tool (i.e AndroPy) more efficiently".upper())
print("-------------------------------------------------------------------------------------------------------------------------------------------")
print("Enter your input folder path: ", end='')
input_folder = input()

print("Enter your output folder path: ", end='')
output_folders_base = input()


# Define the number of files to split and the number of output folders
print("Enter the desired number of output folder: ", end='')
num_output_folders = int(input())

# Get a list of all files in the input folder
file_list = os.listdir(input_folder)

# Calculate the number of files per output folder
num_files_per_output_folder = int(len(file_list) / num_output_folders)
print("Number of files for each output folder would be: %d" % num_files_per_output_folder)

# Create an array for multiple output folder
output_folders= []
for i in range (num_output_folders):
    output_folders.append(output_folders_base + str(i) + "/")
print("Files will be saved in those folders: ", output_folders)



# Iterate over the output folders and copy the files to each folder
for i, folder_path in enumerate(output_folders):
    # Create the output folder if it doesn't exist
    if not os.path.exists(folder_path):
        os.makedirs(folder_path)
    
    # Calculate the start and end indices for this folder
    start_index = i * num_files_per_output_folder
    end_index = start_index + num_files_per_output_folder
    
    # If this is the last folder, copy all remaining files
    if i == num_output_folders - 1:
        end_index = len(file_list)
    
    # Copy the files to the output folder
    for filename in file_list[start_index:end_index]:
        input_path = os.path.join(input_folder, filename)
        output_path = os.path.join(folder_path, filename)
        shutil.copy2(input_path, output_path)
